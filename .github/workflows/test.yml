name: Reusable Date Workflow

on:
  workflow_call:


jobs:
  test-unit:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout del código
        uses: actions/checkout@v4

      - name: Configurar Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.12"

      - name: Instalar dependencias
        run: |
          pip install flask pytest

      - name: Ejecutar tests
        run: pytest -v

  test-integration:
          runs-on: ubuntu-latest
          steps:
            - name: Checkout del código
              uses: actions/checkout@v4
      
            - name: Ejecutar análisis de SonarCloud
              run: echo "Comprueba que cada función o módulo funciona bien individualmente"
          needs: test-unit

  test-lint:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout del código
        uses: actions/checkout@v4

      - name: Ejecutar análisis
        run: echo "DControl de estilo, errores comunes"
    needs: test-integration

  sonarcloud:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout del código
        uses: actions/checkout@v4

      - name: Ejecutar análisis de SonarCloud
        run: echo "Detección temprana de errores y malas prácticas"
    needs: test-lint

