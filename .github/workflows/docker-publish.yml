name: Build Docker Image

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]
  workflow_dispatch:

jobs:
  build-docker:
    uses: tu-usuario/repo-workflows-reusables/.github/workflows/build-docker-reusable.yml@main
    with:
      image-name: "mi-app"
      dockerfile-path: "./Dockerfile"
      context-path: "."
      registry-username: "pablokbs"
    secrets:
      REGISTRY_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}
  
  show-result:
    needs: build-docker
    runs-on: ubuntu-latest
    steps:
      - name: Show built image
        run: |
          echo "Image built: ${{ needs.build-docker.outputs.image-tag }}"