name: Deploy to GKS QA

on:
  workflow_call:
    inputs:
      deploy_to_gks:
        required: true
        type: boolean

  workflow_dispatch:
    inputs:
      deploy_to_gks:
        description: "¬øDesplegar a GKS QA?"
        required: true
        default: true
        type: boolean

jobs:
  deploy-gks-qa:
    name: Deploy to GKS QA
    if: inputs.deploy_to_gks == true
    runs-on: ubuntu-latest
    # üîê Tambi√©n puedes a√±adir environment aqu√≠ para doble protecci√≥n
    environment: 
      name: qa
      url: https://qa.tu-dominio.com  # URL opcional del entorno

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Deploy to GKS QA
        run: |
          echo "üöÄ Deploying to GKS QA environment..."
          # Tus comandos de despliegue
        env:
          GKS_PROJECT: ${{ secrets.GKS_PROJECT }}
          GKS_CLUSTER: ${{ secrets.GKS_CLUSTER }}